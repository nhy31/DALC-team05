<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dongduk.dalc05.aah.dao.mybatis.mapper.CommunityMapper">
	
	<!-- 전체게시판 게시글 인기순 10개 보여주기 -->
	<select id="getBestPosts" resultType="dongduk.dalc05.aah.domain.Post">
		Select *
		FROM POST
		ORDER BY post_hits DESC
		limit 10;
	</select>	
	
	<!-- 전체 커뮤니티 리스트 보기 -->
	<select id="getCommuList" resultType="dongduk.dalc05.aah.domain.Community">
		Select *
		FROM Community
	</select>
	
	<!-- 나의 커뮤니티들 -->
	<select id="myCommuList" resultType="dongduk.dalc05.aah.domain.Community">
		Select *
		FROM community
		WHERE commu_code = ( Select commu_code
						     FROM cmember
							 WHERE member_code = #{member_code} ) 
	</select>
	
	<!-- 커뮤니티 생성 -->
	<insert id="insertCommu" parameterType="dongduk.dalc05.aah.domain.Community">
	 	insert into community(sick_code, commu_name, commu_introduce) 
	 	values 
	 	(#{sick_code}, #{commu_name}, #{commu_introduce}); 
	</insert>
	
	<!-- 커뮤 생성시 커뮤이름 중복확인 -->
	<select id="checkName"  parameterType="String" resultType="String">
		Select commu_name 
		FROM community 
		where commu_name = #{commu_name}
	</select>

	<!-- commu_code로 name 가져오기 -->
	<select id="getCommuName" resultType="String">
		Select commu_name
		FROM COMMUNITY
		WHERE commu_code = #{commu_code}
	</select>
	
</mapper>